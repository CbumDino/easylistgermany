# https://docs.travis-ci.com/user/languages/python/
language: python

# https://docs.travis-ci.com/user/customizing-the-build/#Building-Specific-Branches
branches:
  only:
    - master

# https://docs.travis-ci.com/user/encryption-keys/
env:
  global:
    - secure: "Vq5tSHtG76ZVy2NpJMbjUE7d5lHMQqxw3hv+dDLooJC1jXM6hKlibUI2MLiTP53kN3byCP01NztIjUd2Ev7FKcIhNiMbMtFo7YXeVGNGtRrm6Xhy+94iNcSN9sAn0XWFaapnOAxYnQOATLg1E8e0yzASiTAJz58auG5yDrDf/44awCC3qlEGSHKP2Hm7RGkSUhQrF86IZ1Frg1pRvT1VcHbRwwnp9aMlZuGkQCxjonl4N6yAtD2mghItF7+05iGQZvu3Yn25inQUVWE2/LmK7LR+x0SZtQUnpRWS6EO2JjFeXU8cjJNJki4Gxbw4McKxsyOfgz3R0DqKULckCHUKBQLms/tcZHH605eaSwofpPPLGEmUIY3fFaZ2JWZr8ix8EyAQwRk2+pLNBOHA80c+yqn3U2iOdsHw5/Lz2m0f8UPkIwJ8k83eKdPAf3W2opSjG+eDa7fDTRezQdqB3tA8iXPkm4ME3e96yHrnA3Ss20Lga2HPfZUmsg15bCLPAXLFTjNTINz6DLa4En7XDKz8k0jhdQrHqkJIddISlYVz8T45BVq4z5HmSUPB0IZx6N67XxAGIMMhaoZj3Zj21/xAVmRwuvAUrqnMTJZGDDlyxuID8PHjKy1FS01X6APXztkIEQMkC81kfZLaUUufaA9e6qR8vgnMh/Y0f7WLsoWIhbQ="

# https://docs.travis-ci.com/user/customizing-the-build/#The-Build-Lifecycle
install:
  - pip install git+https://github.com/adblockplus/python-abp
before_script:
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "TravisCI"
  - git config --global push.default "matching"

# https://docs.travis-ci.com/user/customizing-the-build/#Customizing-the-Build-Step
script:
  - git clone -b gh-pages "https://$GITHUB_TOKEN@github.com/easylist/easylistgermany" output
  - flrender -i easylistgermany=. easylistgermany.template output/easylistgermany.txt
  - cd output && git add --all . && git commit -m "Publishing revision $(git --git-dir ../.git rev-parse --short HEAD)" && git push --force origin gh-pages

